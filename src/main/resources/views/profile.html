<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>

    <title>Find me</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
<div>
    <div class="left">
        <h1>Photo</h1>

        <div>
            <button class="btn">Send message</button>
        </div>
    </div>
    <!--<div class="right">
        Styled text here-->
    <!-- <p th:text="${text}"></p>-->
    <div class="bblock">
        <p>First name:</p>
        <p>Last name:</p>
        <p>Phone:</p>
        <p>Country:</p>
        <p>City:</p>
        <p>Age:</p>
        <p>Date registrated:</p>
        <p>Last date activated:</p>
        <p>Relationship status:</p>
        <p>Religion:</p>
        <p>School:</p>
        <p>University:</p>
    </div>
    <div class="bblock">
        <p th:text="${user.firstName}"></p>
        <p th:text="${user.lastName}"></p>
        <p th:text="${user.phone}"></p>
        <p th:text="${user.country}"></p>
        <p th:text="${user.city}"></p>
        <p th:text="${user.age}"></p>
        <p th:text="${user.dateRegistrated}"></p>
        <p th:text="${user.lastDateActivited}"></p>
        <p th:text="${user.relationshipStatus}"></p>
        <p th:text="${user.religion}"></p>
        <p th:text="${user.school}"></p>
        <p th:text="${user.university}"></p>
    </div>
    <div class="right">
        <form id="form-addFriend" action="/addFriend">

        <input path="id_friend" type="number"
               class="inputtext _58mg _5dba _2ph-"
                name="id_friend"
               id="u_0_n"  placeholder="id friend" required>

        <button class="btn" type="submit" name="addFriend">addFriend</button>

        </form>


    </div>
</div>
<button id="test-ajax">Sign out</button>

</body>
<script>
    $("#form-addFriend").submit(function (e) {
        var form = $(this).serialize();
        $.ajax({
            type: "POST",
            url: "/addFriend",
            data: form,

            success: function success() {
                debugger;
                alert("Request had sent successfully");
                window.location.href = 'profile';
                // $(this).load('testForRedirect.html');
            },
            error: function error(e) {
                debugger;
                if(e.status === 400){
                    alert("Wrong friend's id. Try again.");
                    window.location.href = 'index';

                }
                if(e.status === 401){
                    alert("You have not permissions. Please, login to site");
                    window.location.href = 'index';

                }
                if(e.status === 500){
                    alert("Something went wrong.. .");
                    window.location.href = 'index';

                }
                // $(this).load('testForRedirect.html');

            }
        });
        e.preventDefault();
    })
    $("#test-ajax").click(function () {
        $.ajax({
            type: "POST",
            url: "/logout",
            data: {},

            success: function success() {
                debugger;
                alert("User log out success!");
                window.location.href = 'index.html';
                // $(this).load('testForRedirect.html');
            },
            error: function error(xhr) {
                debugger;
                alert("error!");
            }
        });
        e.preventDefault();
    });
</script>
<style>
    .left{
        float: left;
        width: 200px;
        height: 300px;
        border-style: solid;
    }
    .right{
        margin-left: 800px;
    }

    .btn{
        margin-top: 230px;
    }
    .bblock {
        float: left; /*Задаем обтекание*/
        font-size: 40px;
        width: 150px; /*Фиксируем ширину блока*/
        margin-right: 10px;
        text-align: left; /*Центрируем текст по горизонтали*/
    }
</style>
</html>

